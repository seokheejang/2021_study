# Node.js architecture
Node.js는 client의 요청을 단일 스레드로 처리하는 "Single-threaded event loop" 모델 아키텍쳐이다.

Node.js의 이벤트 중심(event-driven) 특성으로 인해 여러 client들의 요청을 동시에 처리가 가능하다.

```
   ┌───────────────────────────┐
┌─>│           timers          │
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │     pending callbacks     │
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │       idle, prepare       │
│  └─────────────┬─────────────┘      ┌───────────────┐
│  ┌─────────────┴─────────────┐      │   incoming:   │
│  │           poll            │<─────┤  connections, │
│  └─────────────┬─────────────┘      │   data, etc.  │
│  ┌─────────────┴─────────────┐      └───────────────┘
│  │           check           │
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
└──┤      close callbacks      │
   └───────────────────────────┘
```
* __timers__: setTimeout()과 setInterval()로 스케줄링한 콜백을 실행
* __pending callbacks__: 다음 루프 반복으로 연기된 I/O 콜백들을 실행
* __idle, prepare__: 내부용으로만 사용
* __poll__: 새로운 I/O 이벤트를 가져옴. I/O와 연관된 콜백(클로즈 콜백, 타이머로 스케줄링된 콜백, setImmediate()를 제외한 거의 모든 콜백)을 실행. 적절한 시기에 node는 여기서 블록.
* __check__: setImmediate() 콜백은 여기서 호출.
* __close callbacks__: 일부 close 콜백들, 예를 들어 socket.on('close', ...).